<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gntour.gangneungyeojido.domain.mytravel.mapper.FavoritesMapper">
<!--    <resultMap id="favoritesResultMap" type="com.gntour.gangneungyeojido.domain.mytravel.vo.Favorites">-->
<!--        <result property="favoriteNo" column="FAVORITES_NO"/>-->
<!--        <result property="memberId" column="MEMBER_ID"/>-->
<!--        <result property="travelNo" column="TRAVEL_NO"/>-->
<!--        <result property="regDate" column="REG_DATE"/>-->
<!--        <result property="updateDate" column="UPDATE_DATE"/>-->
<!--    </resultMap>-->
<!--    <resultMap id="TravelInfoResultMap" type="com.gntour.gangneungyeojido.domain.travel.vo.TravelInfo" extends="favoritesResultMap">-->
<!--        <result property="travelNo" column="TRAVEL_NO"/>-->
<!--        <result property="travelName" column="TRAVEL_NAME"/>-->
<!--        <result property="introduce" column="INTRODUCE"/>-->
<!--    </resultMap>-->
    <select id="selectAllFavoritesByMember" resultType="FavoritesResponse">
        SELECT t.TRAVEL_NAME "TRAVEL_NAME", t.INTRODUCE "INTRODUCE", f.FAVORITES_NO "FAVORITES_NO", t.TRAVEL_NO "TRAVEL_NO"
        FROM FAVORITES f
        JOIN TRAVEL_INFO t ON f.FAVORITES_NO = t.TRAVEL_NO
        ORDER BY
        <choose>
            <when test='isNew.equals("Y")'> f.FAVORITES_NO DESC </when>
            <otherwise> f.FAVORITES_NO ASC </otherwise>
        </choose>
    </select>
    <insert id="insertFavorites">
        INSERT INTO FAVORITES (MEMBER_ID,TRAVEL_NO,REG_DATE)
        VALUES (MEMBER_ID = #{memberId}, TRAVEL_NO = #{travelNo}, REG_DATE = #{regDate})
    </insert>
</mapper>